(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{HKqj:function(e,t,r){"use strict";r.r(t),r.d(t,"ProfileModule",(function(){return x}));var n=r("ofXK"),a=r("3Pt+"),o=r("Wp6s"),i=r("qFsG"),s=r("bTqV"),c=r("kmnG"),p=r("NFeN"),l=r("tyNb"),d=r("fXoL"),m=r("VGjC"),b=r("mrSG");function g(e,t){if(1&e&&(d.Pb(0,"mat-error",7),d.rc(1),d.Ob()),2&e){const e=d.Zb();d.Ab(1),d.tc(" ",e.errorMessage," ")}}let u=(()=>{class e{constructor(e){this.userService=e,this.loading=!1,this._imageFilename=""}get imageFilename(){return this._imageFilename}ngOnInit(){}setImage(e){const t=e.target.files[0];this._imageFilename=t.name,t||(this.errorMessage="Please choose a file"),t.size/1024/1024>=1&&(this.errorMessage="File size should not be more than 1MB");const r=t.name.split(".").pop();["jpeg","gif","png","apng","svg","png","jpg"].includes(r)||(this.errorMessage="Unsupported file or image type"),this.imageAsFile=t,this.errorMessage=""}submitHandler(){return Object(b.a)(this,void 0,void 0,(function*(){this.loading=!0;try{yield this.userService.uploadFile(this.imageAsFile),this.loading=!1}catch(e){this.errorMessage=e,this.loading=!1}}))}}return e.\u0275fac=function(t){return new(t||e)(d.Kb(m.a))},e.\u0275cmp=d.Eb({type:e,selectors:[["app-image-upload"]],decls:13,vars:3,consts:[["ngClass","image_upload"],["ngClass","image_error",4,"ngIf"],["matInput","","type","text","disabled","true",3,"value"],["type","file","id","file","ngClass","input-file",3,"change"],["for","file"],["inline","true","color","primary"],["ngClass","image_button","mat-raised-button","",3,"disabled","click"],["ngClass","image_error"]],template:function(e,t){1&e&&(d.Pb(0,"div",0),d.qc(1,g,2,1,"mat-error",1),d.Pb(2,"mat-form-field"),d.Pb(3,"mat-label"),d.rc(4,"Filename"),d.Ob(),d.Lb(5,"input",2),d.Ob(),d.Pb(6,"input",3),d.Wb("change",(function(e){return t.setImage(e)})),d.Ob(),d.Pb(7,"label",4),d.Pb(8,"mat-icon",5),d.rc(9,"unarchive"),d.Ob(),d.rc(10,"Choose an image... "),d.Ob(),d.Pb(11,"button",6),d.Wb("click",(function(){return t.submitHandler()})),d.rc(12,"Upload"),d.Ob(),d.Ob()),2&e&&(d.Ab(1),d.ec("ngIf",t.errorMessage),d.Ab(4),d.ec("value",t.imageFilename),d.Ab(6),d.ec("disabled",t.loading))},directives:[n.i,n.k,c.b,c.e,i.a,p.a,s.b,c.a],styles:[".image_upload[_ngcontent-%COMP%]   .image_error[_ngcontent-%COMP%]{margin:16px}.image_upload[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-right:12px;font-size:17px}.image_upload[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:9px;transform:scale(1.6)}.image_upload[_ngcontent-%COMP%]   .input-file[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}.image_upload[_ngcontent-%COMP%]   .input-file[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{cursor:pointer;display:inline-block;background-color:#f0d9c0;border-radius:5px;color:#000;font-size:17px;padding:10px 18px;transition:all .2s ease-in}.image_upload[_ngcontent-%COMP%]   .input-file[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%]{outline:1px dotted #000;outline:5px auto -webkit-focus-ring-color}.image_upload[_ngcontent-%COMP%]   .input-file[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:none}.image_upload[_ngcontent-%COMP%]   .image_button[_ngcontent-%COMP%]{margin:16px;padding:3px 38px;font-size:17px}"]}),e})(),f=(()=>{class e{constructor(e){this.userService=e}}return e.\u0275fac=function(t){return new(t||e)(d.Kb(m.a))},e.\u0275cmp=d.Eb({type:e,selectors:[["app-profile-card"]],decls:9,vars:3,consts:[["ngClass","profile_card"],["ngClass","profile_image","routerLink","/user/auth/register"],["mat-card-image","","ngClass","profile_avatar",3,"src"]],template:function(e,t){1&e&&(d.Pb(0,"mat-card",0),d.Pb(1,"mat-card-header"),d.Pb(2,"mat-card-title"),d.rc(3),d.Ob(),d.Pb(4,"mat-card-subtitle"),d.rc(5),d.Ob(),d.Ob(),d.Pb(6,"div",1),d.Lb(7,"img",2),d.Ob(),d.Lb(8,"app-image-upload"),d.Ob()),2&e&&(d.Ab(3),d.sc(t.userService.currentUser.displayName),d.Ab(2),d.sc(t.userService.currentUser.email),d.Ab(2),d.ec("src",t.userService.currentUser.photoURL||"assets/default-user.png",d.jc))},directives:[o.a,n.i,o.c,o.g,o.f,l.c,o.d,u],styles:["mat-card.profile_card[_ngcontent-%COMP%]{margin:1em auto;max-width:320px}mat-card.profile_card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{margin-bottom:5px}mat-card.profile_card[_ngcontent-%COMP%]   .profile_image[_ngcontent-%COMP%]{width:100%}mat-card.profile_card[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{object-fit:cover}"]}),e})();function h(e,t){if(1&e&&(d.Pb(0,"mat-error",6),d.rc(1),d.Ob()),2&e){const e=d.Zb();d.Ab(1),d.tc(" ",e.errorMessage," ")}}let P=(()=>{class e{constructor(e,t){this.fb=e,this.userService=t,this.loading=!1}onSubmit(){return Object(b.a)(this,void 0,void 0,(function*(){if(this.form.invalid)return;this.loading=!0;const{displayName:e,photoURL:t}=this.form.value;try{yield this.userService.update(e,t),this.loading=!1}catch(r){this.errorMessage=r,this.loading=!1}}))}onChange(){this.errorMessage&&(this.errorMessage="")}ngOnInit(){this.form=this.fb.group({displayName:[this.userService.currentUser.displayName],photoURL:[this.userService.currentUser.photoURL||"",[a.n.pattern(/^(http|https):/g)]]})}}return e.\u0275fac=function(t){return new(t||e)(d.Kb(a.b),d.Kb(m.a))},e.\u0275cmp=d.Eb({type:e,selectors:[["app-profile-update"]],decls:16,vars:3,consts:[[1,"reset_card"],[3,"formGroup","ngSubmit"],["ngClass","reset_error",4,"ngIf"],["matInput","","type","text","name","displayName","placeholder","John Doe","formControlName","displayName",3,"change"],["matInput","","type","text","name","photoURL","placeholder","http://","formControlName","photoURL",3,"change"],["ngClass","reset_button","mat-raised-button","",3,"disabled"],["ngClass","reset_error"]],template:function(e,t){1&e&&(d.Pb(0,"mat-card",0),d.Pb(1,"mat-card-content"),d.Pb(2,"form",1),d.Wb("ngSubmit",(function(){return t.onSubmit()})),d.qc(3,h,2,1,"mat-error",2),d.Pb(4,"mat-form-field"),d.Pb(5,"mat-label"),d.rc(6,"Name"),d.Ob(),d.Pb(7,"input",3),d.Wb("change",(function(){return t.onChange()})),d.Ob(),d.Ob(),d.Pb(8,"mat-form-field"),d.Pb(9,"mat-label"),d.rc(10,"Image URL"),d.Ob(),d.Pb(11,"input",4),d.Wb("change",(function(){return t.onChange()})),d.Ob(),d.Pb(12,"mat-error"),d.rc(13," Please enter a valid URL. "),d.Ob(),d.Ob(),d.Pb(14,"button",5),d.rc(15,"Save"),d.Ob(),d.Ob(),d.Ob(),d.Ob()),2&e&&(d.Ab(2),d.ec("formGroup",t.form),d.Ab(1),d.ec("ngIf",t.errorMessage),d.Ab(11),d.ec("disabled",t.loading))},directives:[o.a,o.b,a.o,a.j,a.d,n.k,c.b,c.e,i.a,a.a,a.i,a.c,c.a,s.b,n.i],styles:["mat-card.reset_card[_ngcontent-%COMP%]{margin:1em auto;min-width:320px;max-width:420px}mat-card.reset_card[_ngcontent-%COMP%]   .reset_error[_ngcontent-%COMP%]{margin:16px}mat-card.reset_card[_ngcontent-%COMP%]   .reset_button[_ngcontent-%COMP%]{margin:14px;padding:3px 86px;font-size:17px}mat-card.reset_card[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{display:block;margin-bottom:4px;padding:15px}mat-card.reset_card[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;margin-left:5px}"]}),e})();var O=r("xsFr");function _(e,t){if(1&e&&(d.Pb(0,"mat-error"),d.rc(1),d.Ob()),2&e){const e=d.Zb(2);d.Ab(1),d.tc(" ",e.errorMessage," ")}}function C(e,t){1&e&&(d.Pb(0,"mat-error"),d.rc(1," Passwords don't match! "),d.Ob())}function M(e,t){if(1&e){const e=d.Qb();d.Nb(0),d.Pb(1,"mat-card"),d.Pb(2,"mat-card-content"),d.Pb(3,"form",1),d.Wb("ngSubmit",(function(){return d.ic(e),d.Zb().onSubmit()})),d.qc(4,_,2,1,"mat-error",0),d.qc(5,C,2,0,"mat-error",0),d.Pb(6,"mat-form-field"),d.Pb(7,"mat-label"),d.rc(8,"Password"),d.Ob(),d.Pb(9,"input",2),d.Wb("change",(function(){return d.ic(e),d.Zb().onChange()})),d.Ob(),d.Pb(10,"mat-error"),d.rc(11," Password must be at least 8 symbols. "),d.Ob(),d.Ob(),d.Pb(12,"div",3),d.Pb(13,"mat-form-field"),d.Pb(14,"mat-label"),d.rc(15,"New Password"),d.Ob(),d.Pb(16,"input",4),d.Wb("change",(function(){return d.ic(e),d.Zb().onChange()})),d.Ob(),d.Pb(17,"mat-error"),d.rc(18," Password must be at least 8 symbols. "),d.Ob(),d.Ob(),d.Pb(19,"mat-form-field"),d.Pb(20,"mat-label"),d.rc(21,"Confirm password"),d.Ob(),d.Pb(22,"input",5),d.Wb("change",(function(){return d.ic(e),d.Zb().onChange()})),d.Ob(),d.Pb(23,"mat-error"),d.rc(24," Password must be at least 8 symbols. "),d.Ob(),d.Ob(),d.Ob(),d.Pb(25,"button",6),d.rc(26,"Change password"),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Mb()}if(2&e){const e=d.Zb();d.Ab(3),d.ec("formGroup",e.form),d.Ab(1),d.ec("ngIf",e.errorMessage),d.Ab(1),d.ec("ngIf",(null==e.form.get("passData").errors?null:e.form.get("passData").errors.passwordMatch)&&e.form.get("passData.rePassword").touched&&e.form.get("passData.rePassword").dirty)}}let v=(()=>{class e{constructor(e,t,r){this.fb=e,this.userService=t,this.router=r,this.loading=!1}onSubmit(){return Object(b.a)(this,void 0,void 0,(function*(){if(this.form.invalid)return;this.loading=!0;const{currentPassword:e,passData:t}=this.form.value;try{yield this.userService.changePassword(e,t.password),this.router.navigate([""]),this.loading=!1}catch(r){this.errorMessage=r.message,this.loading=!1}}))}onChange(){this.errorMessage&&(this.errorMessage="")}ngOnInit(){this.form=this.fb.group({currentPassword:["",[a.n.required,a.n.minLength(8)]],passData:this.fb.group({password:["",[a.n.required,a.n.minLength(8)]],rePassword:["",[a.n.required,a.n.minLength(8)]]},{validators:[O.a]})})}}return e.\u0275fac=function(t){return new(t||e)(d.Kb(a.b),d.Kb(m.a),d.Kb(l.b))},e.\u0275cmp=d.Eb({type:e,selectors:[["app-profile-password-change"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],["matInput","","type","password","name","currentPassword","formControlName","currentPassword",3,"change"],["formGroupName","passData"],["matInput","","type","password","name","password","formControlName","password",3,"change"],["matInput","","type","password","name","rePassword","formControlName","rePassword",3,"change"],["ngClass","change_button","mat-raised-button",""]],template:function(e,t){1&e&&d.qc(0,M,27,3,"ng-container",0),2&e&&d.ec("ngIf","password"===t.userService.currentUser.providerData[0].providerId)},directives:[n.k,o.a,o.b,a.o,a.j,a.d,c.b,c.e,i.a,a.a,a.i,a.c,c.a,a.e,s.b,n.i],styles:["mat-card[_ngcontent-%COMP%]{margin:1em auto;min-width:320px;max-width:420px}mat-card[_ngcontent-%COMP%]   .change_button[_ngcontent-%COMP%]{margin:14px;padding:3px 86px;font-size:17px}mat-card[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{display:block;padding:0 26px;margin-bottom:4px}"]}),e})();const w=l.f.forChild([{path:"",children:[{path:"profile",component:(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Eb({type:e,selectors:[["app-profile"]],decls:6,vars:0,consts:[["ngClass","profile"],["ngClass","profile_card"],["ngClass","profile_options"]],template:function(e,t){1&e&&(d.Pb(0,"div",0),d.Pb(1,"div",1),d.Lb(2,"app-profile-card"),d.Ob(),d.Pb(3,"div",2),d.Lb(4,"app-profile-update"),d.Lb(5,"app-profile-password-change"),d.Ob(),d.Ob())},directives:[n.i,f,P,v],styles:[".profile[_ngcontent-%COMP%]{margin:0 auto;display:grid;grid-template-columns:100%}@media (min-width:600px){.profile[_ngcontent-%COMP%]{display:grid;grid-template-columns:36% 64%;padding:0 80px}}@media (min-width:960px){.profile[_ngcontent-%COMP%]{display:grid;grid-template-columns:36% 64%;padding:0 120px}}.profile[_ngcontent-%COMP%]   .profile_card[_ngcontent-%COMP%], .profile[_ngcontent-%COMP%]   .profile_options[_ngcontent-%COMP%]{margin:0 auto}"]}),e})()}]}]);let x=(()=>{class e{}return e.\u0275mod=d.Ib({type:e}),e.\u0275inj=d.Hb({factory:function(t){return new(t||e)},imports:[[n.c,w,o.e,i.b,s.c,c.d,p.b,a.f,a.m]]}),e})()}}]);